{"ast":null,"code":"import plugImage from '@/assets/img/plug300.png';\nimport MyModal from \"@/components/UI/MyModal.vue\";\nimport ViolettButton from \"@/components/UI/ViolettButton.vue\";\nimport MyCropper from \"@/components/UI/MyCropper.vue\";\nexport default {\n  components: {\n    MyCropper,\n    ViolettButton,\n    MyModal\n  },\n  data() {\n    return {\n      event: {\n        category: 'Категория',\n        title: 'Название',\n        is_pushkin_card: false,\n        date: 'Дата',\n        time: 'Время',\n        rate: '0+',\n        venue: 'Место',\n        price: '0',\n        image: plugImage\n      },\n      isVisible: false,\n      currentImage: plugImage,\n      cropperSize: {\n        width: 300,\n        height: 425\n      }\n    };\n  },\n  methods: {\n    dragDrop(event) {\n      const data = JSON.parse(event.dataTransfer.getData('event'));\n      this.event = Object.assign(this.event, data);\n      this.currentImage = data.image;\n    },\n    openModal() {\n      this.isVisible = true;\n    },\n    crop() {\n      const {\n        coordinates,\n        canvas\n      } = this.$refs.cropper.getResult();\n      this.coordinates = coordinates;\n      this.event.image = canvas.toDataURL();\n      this.isVisible = false;\n    },\n    upgradeImage(image, oldImage) {\n      this.event.image = image;\n      this.currentImage = oldImage;\n      this.isVisible = false;\n    }\n  },\n  computed: {\n    splitPrice: function () {\n      return this.event.price.split('—').length > 1 ? `от ${this.event.price.split('—')[0]} Р` : `${this.event.price.split('—')[0]} Р`;\n    },\n    updateTime: function () {\n      return `в ${this.event.time}`;\n    }\n  }\n};","map":{"version":3,"names":["plugImage","MyModal","ViolettButton","MyCropper","components","data","event","category","title","is_pushkin_card","date","time","rate","venue","price","image","isVisible","currentImage","cropperSize","width","height","methods","dragDrop","JSON","parse","dataTransfer","getData","Object","assign","openModal","crop","coordinates","canvas","$refs","cropper","getResult","toDataURL","upgradeImage","oldImage","computed","splitPrice","split","length","updateTime"],"sources":["D:\\jobs\\calculator-and-templateBS\\frontend\\src\\components\\email-templater\\PosterTemplate.vue"],"sourcesContent":["<template>\r\n    <my-modal v-model:show=\"isVisible\">\r\n        <my-cropper\r\n            :image=\"currentImage\"\r\n            @upgradeimage=\"upgradeImage\"\r\n            :size=\"cropperSize\"\r\n        ></my-cropper>\r\n    </my-modal>\r\n    <div\r\n            class=\"poster\"\r\n            @dragover.prevent\r\n            @drop=\"dragDrop($event)\"\r\n    >\r\n        <img\r\n                :src=\"event.image\"\r\n                alt=\"image\"\r\n                @click=\"openModal\"\r\n        >\r\n        <div class=\"poster__body\">\r\n            <p class=\"poster__category\">{{ event.category }}</p>\r\n            <p class=\"poster__title\" contenteditable=\"true\">{{ event.title }}</p>\r\n            <p class=\"poster__pushkin\"><span v-if=\"event.is_pushkin_card\">Пушкинская карта</span></p>\r\n            <p style=\"font-size: 13px\">\r\n                <span class=\"poster__date\">{{ event.date }}</span> <span class=\"poster__time\">{{ updateTime }}</span> <span class=\"poster__rate\">{{ event.rate }}</span>\r\n            </p>\r\n            <p class=\"poster__venue\" contenteditable=\"true\">{{ event.venue }}</p>\r\n            <a class=\"poster__price\" :href=\"event.link\" target=\"_blank\" >{{ splitPrice }}</a>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport plugImage from '@/assets/img/plug300.png'\r\nimport MyModal from \"@/components/UI/MyModal.vue\";\r\nimport ViolettButton from \"@/components/UI/ViolettButton.vue\";\r\nimport MyCropper from \"@/components/UI/MyCropper.vue\";\r\n\r\nexport default {\r\n    components: {MyCropper, ViolettButton, MyModal},\r\n    data() {\r\n        return {\r\n            event: {\r\n                category: 'Категория',\r\n                title: 'Название',\r\n                is_pushkin_card: false,\r\n                date: 'Дата',\r\n                time: 'Время',\r\n                rate: '0+',\r\n                venue: 'Место',\r\n                price: '0',\r\n                image: plugImage\r\n            },\r\n            isVisible: false,\r\n            currentImage: plugImage,\r\n            cropperSize: {\r\n                width: 300,\r\n                height: 425\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        dragDrop(event) {\r\n            const data = JSON.parse(event.dataTransfer.getData('event'))\r\n            this.event = Object.assign(this.event, data)\r\n            this.currentImage = data.image\r\n        },\r\n        openModal() {\r\n            this.isVisible = true\r\n        },\r\n        crop() {\r\n            const {coordinates, canvas,} = this.$refs.cropper.getResult();\r\n            this.coordinates = coordinates;\r\n            this.event.image = canvas.toDataURL();\r\n            this.isVisible = false\r\n        },\r\n        upgradeImage(image, oldImage) {\r\n            this.event.image = image\r\n            this.currentImage = oldImage\r\n            this.isVisible = false\r\n        }\r\n    },\r\n    computed: {\r\n        splitPrice: function () {\r\n            return this.event.price.split('—').length > 1 ? `от ${this.event.price.split('—')[0]} Р` : `${this.event.price.split('—')[0]} Р`\r\n        },\r\n        updateTime: function () {\r\n            return `в ${this.event.time}`\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.poster {\r\n  width: 177px;\r\n  border-radius: 6px;\r\n  overflow: hidden;\r\n  border: 1px #ccc solid;\r\n  box-shadow: 0 1px 6px #ccc;\r\n  margin-bottom: 30px;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n\r\n  img {\r\n    width: 100%;\r\n    height: 234px;\r\n    display: block;\r\n    background: transparent;\r\n  }\r\n\r\n  &__body {\r\n    height: 228px;\r\n    width: 100%;\r\n    padding: 0 10px;\r\n    border-top: 1px #bebebe solid;\r\n  }\r\n\r\n  &__category {\r\n    font-size: 12px;\r\n    color: #de39a2;\r\n    font-weight: normal;\r\n    padding-top: 6px;\r\n  }\r\n\r\n  &__pushkin {\r\n    height: 15px;\r\n    margin: 5px 0;\r\n    font-size: 12px;\r\n    color: #de39a2;\r\n    font-weight: normal;\r\n  }\r\n\r\n  &__title {\r\n    height: 50px;\r\n    margin-top: 10px;\r\n    overflow: hidden;\r\n  }\r\n\r\n  &__time {\r\n    color: #868686;\r\n  }\r\n\r\n  &__rate {\r\n    background-color: #bebebe;\r\n    color: #fff;\r\n    font-size: 10px;\r\n    padding: 1px 2px;\r\n    border-radius: 2px;\r\n    vertical-align: top;\r\n  }\r\n\r\n  &__venue {\r\n    font-size: 13px;\r\n    font-weight: normal;\r\n    color: #868686;\r\n    height: 50px;\r\n    margin: 5px 0;\r\n  }\r\n\r\n  &__price {\r\n    text-decoration: none;\r\n    font-weight: normal;\r\n    background-color: #8e4adf;\r\n    display: block;\r\n    width: 148px;\r\n    border: none;\r\n    border-radius: 50px;\r\n    color: #ffffff;\r\n    font-family: sans-serif;\r\n    font-size: 16px;\r\n    text-align: center;\r\n    padding: 7px 10px;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"AAgCA,OAAOA,SAAQ,MAAO,0BAAyB;AAC/C,OAAOC,OAAM,MAAO,6BAA6B;AACjD,OAAOC,aAAY,MAAO,mCAAmC;AAC7D,OAAOC,SAAQ,MAAO,+BAA+B;AAErD,eAAe;EACXC,UAAU,EAAE;IAACD,SAAS;IAAED,aAAa;IAAED;EAAO,CAAC;EAC/CI,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,KAAK,EAAE;QACHC,QAAQ,EAAE,WAAW;QACrBC,KAAK,EAAE,UAAU;QACjBC,eAAe,EAAE,KAAK;QACtBC,IAAI,EAAE,MAAM;QACZC,IAAI,EAAE,OAAO;QACbC,IAAI,EAAE,IAAI;QACVC,KAAK,EAAE,OAAO;QACdC,KAAK,EAAE,GAAG;QACVC,KAAK,EAAEf;MACX,CAAC;MACDgB,SAAS,EAAE,KAAK;MAChBC,YAAY,EAAEjB,SAAS;MACvBkB,WAAW,EAAE;QACTC,KAAK,EAAE,GAAG;QACVC,MAAM,EAAE;MACZ;IACJ;EACJ,CAAC;EACDC,OAAO,EAAE;IACLC,QAAQA,CAAChB,KAAK,EAAE;MACZ,MAAMD,IAAG,GAAIkB,IAAI,CAACC,KAAK,CAAClB,KAAK,CAACmB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3D,IAAI,CAACpB,KAAI,GAAIqB,MAAM,CAACC,MAAM,CAAC,IAAI,CAACtB,KAAK,EAAED,IAAI;MAC3C,IAAI,CAACY,YAAW,GAAIZ,IAAI,CAACU,KAAI;IACjC,CAAC;IACDc,SAASA,CAAA,EAAG;MACR,IAAI,CAACb,SAAQ,GAAI,IAAG;IACxB,CAAC;IACDc,IAAIA,CAAA,EAAG;MACH,MAAM;QAACC,WAAW;QAAEC;MAAO,IAAI,IAAI,CAACC,KAAK,CAACC,OAAO,CAACC,SAAS,EAAE;MAC7D,IAAI,CAACJ,WAAU,GAAIA,WAAW;MAC9B,IAAI,CAACzB,KAAK,CAACS,KAAI,GAAIiB,MAAM,CAACI,SAAS,EAAE;MACrC,IAAI,CAACpB,SAAQ,GAAI,KAAI;IACzB,CAAC;IACDqB,YAAYA,CAACtB,KAAK,EAAEuB,QAAQ,EAAE;MAC1B,IAAI,CAAChC,KAAK,CAACS,KAAI,GAAIA,KAAI;MACvB,IAAI,CAACE,YAAW,GAAIqB,QAAO;MAC3B,IAAI,CAACtB,SAAQ,GAAI,KAAI;IACzB;EACJ,CAAC;EACDuB,QAAQ,EAAE;IACNC,UAAU,EAAE,SAAAA,CAAA,EAAY;MACpB,OAAO,IAAI,CAAClC,KAAK,CAACQ,KAAK,CAAC2B,KAAK,CAAC,GAAG,CAAC,CAACC,MAAK,GAAI,IAAK,MAAK,IAAI,CAACpC,KAAK,CAACQ,KAAK,CAAC2B,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAG,GAAK,GAAE,IAAI,CAACnC,KAAK,CAACQ,KAAK,CAAC2B,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAG;IACnI,CAAC;IACDE,UAAU,EAAE,SAAAA,CAAA,EAAY;MACpB,OAAQ,KAAI,IAAI,CAACrC,KAAK,CAACK,IAAK;IAChC;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}