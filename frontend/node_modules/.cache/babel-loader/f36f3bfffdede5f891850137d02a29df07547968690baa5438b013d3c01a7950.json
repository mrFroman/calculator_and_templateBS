{"ast":null,"code":"import { Cropper } from \"vue-advanced-cropper\";\nimport 'vue-advanced-cropper/dist/style.css';\nimport ViolettButton from \"@/components/UI/ViolettButton.vue\";\nexport default {\n  components: {\n    ViolettButton,\n    Cropper\n  },\n  props: {\n    image: {\n      type: String\n    },\n    size: {\n      width: Number,\n      height: Number\n    }\n  },\n  data() {\n    return {\n      currentImage: this.image,\n      blob: this.image,\n      coordinates: {\n        width: 0,\n        height: 0,\n        left: 0,\n        top: 0\n      }\n    };\n  },\n  methods: {\n    loadImage(event) {\n      const {\n        files\n      } = event.target;\n      if (files && files[0]) {\n        if (this.currentImage) {\n          URL.revokeObjectURL(this.currentImage);\n        }\n        const blob = URL.createObjectURL(files[0]);\n        const reader = new FileReader();\n        reader.onload = () => {\n          this.currentImage = blob;\n          this.blob = blob;\n        };\n        reader.readAsArrayBuffer(files[0]);\n      }\n    },\n    crop() {\n      const {\n        coordinates,\n        canvas\n      } = this.$refs.cropper.getResult();\n      this.coordinates = coordinates;\n      this.currentImage = canvas.toDataURL();\n      this.$emit('upgradeimage', this.currentImage, this.blob);\n    }\n  }\n};","map":{"version":3,"names":["Cropper","ViolettButton","components","props","image","type","String","size","width","Number","height","data","currentImage","blob","coordinates","left","top","methods","loadImage","event","files","target","URL","revokeObjectURL","createObjectURL","reader","FileReader","onload","readAsArrayBuffer","crop","canvas","$refs","cropper","getResult","toDataURL","$emit"],"sources":["D:\\jobs\\calculator-and-templateBS\\frontend\\src\\components\\UI\\MyCropper.vue"],"sourcesContent":["<template>\r\n    <div class=\"cropperWrapper\">\r\n      <h4>Для масштабирования изображения воспользуйтесь колесиком мыши</h4>\r\n        <cropper\r\n                class=\"cropper\"\r\n                :style=\"size\"\r\n                :src=\"currentImage\"\r\n                :stencil-props=\"{\r\n                                handlers: {},\r\n                                movable: false,\r\n                                resizable: false,\r\n                                aspectRatio: size.width/size.height,\r\n                              }\"\r\n                :resize-image=\"{\r\n                                adjustStencil: false\r\n                              }\"\r\n                image-restriction=\"stencil\"\r\n                ref=\"cropper\"\r\n                :stencil-size=\"{\r\n                width: size.width,\r\n                height: size.height\r\n                            }\"\r\n        ></cropper>\r\n        <div class=\"buttons\">\r\n            <violett-button @click=\"crop\">Обрезать</violett-button>\r\n            <violett-button @click=\"$refs.file.click()\">\r\n                <input style=\"display: none\" type=\"file\" ref=\"file\" @change=\"loadImage($event)\" accept=\"image/*\">\r\n                Загрузить изображение\r\n            </violett-button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {Cropper} from \"vue-advanced-cropper\";\r\nimport 'vue-advanced-cropper/dist/style.css';\r\nimport ViolettButton from \"@/components/UI/ViolettButton.vue\";\r\n\r\nexport default {\r\n    components: {ViolettButton, Cropper},\r\n    props: {\r\n        image: {\r\n            type: String\r\n        },\r\n        size: {\r\n            width: Number,\r\n            height: Number\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            currentImage: this.image,\r\n            blob: this.image,\r\n            coordinates: {\r\n                width: 0,\r\n                height: 0,\r\n                left: 0,\r\n                top: 0,\r\n            },\r\n        }\r\n    },\r\n    methods: {\r\n        loadImage(event) {\r\n            const {files} = event.target;\r\n            if (files && files[0]) {\r\n                if (this.currentImage) {\r\n                    URL.revokeObjectURL(this.currentImage)\r\n                }\r\n                const blob = URL.createObjectURL(files[0]);\r\n                const reader = new FileReader();\r\n                reader.onload = () => {\r\n                    this.currentImage = blob\r\n                    this.blob = blob\r\n                };\r\n                reader.readAsArrayBuffer(files[0]);\r\n            }\r\n        },\r\n        crop() {\r\n            const {coordinates, canvas,} = this.$refs.cropper.getResult();\r\n            this.coordinates = coordinates;\r\n            this.currentImage = canvas.toDataURL();\r\n            this.$emit('upgradeimage', this.currentImage, this.blob)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.cropper {\r\n    width: 700px;\r\n    height: 550px;\r\n}\r\n    .buttons {\r\n        display: flex;\r\n        gap: 20px;\r\n    }\r\n</style>\r\n"],"mappings":"AAkCA,SAAQA,OAAO,QAAO,sBAAsB;AAC5C,OAAO,qCAAqC;AAC5C,OAAOC,aAAY,MAAO,mCAAmC;AAE7D,eAAe;EACXC,UAAU,EAAE;IAACD,aAAa;IAAED;EAAO,CAAC;EACpCG,KAAK,EAAE;IACHC,KAAK,EAAE;MACHC,IAAI,EAAEC;IACV,CAAC;IACDC,IAAI,EAAE;MACFC,KAAK,EAAEC,MAAM;MACbC,MAAM,EAAED;IACZ;EACJ,CAAC;EACDE,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,YAAY,EAAE,IAAI,CAACR,KAAK;MACxBS,IAAI,EAAE,IAAI,CAACT,KAAK;MAChBU,WAAW,EAAE;QACTN,KAAK,EAAE,CAAC;QACRE,MAAM,EAAE,CAAC;QACTK,IAAI,EAAE,CAAC;QACPC,GAAG,EAAE;MACT;IACJ;EACJ,CAAC;EACDC,OAAO,EAAE;IACLC,SAASA,CAACC,KAAK,EAAE;MACb,MAAM;QAACC;MAAK,IAAID,KAAK,CAACE,MAAM;MAC5B,IAAID,KAAI,IAAKA,KAAK,CAAC,CAAC,CAAC,EAAE;QACnB,IAAI,IAAI,CAACR,YAAY,EAAE;UACnBU,GAAG,CAACC,eAAe,CAAC,IAAI,CAACX,YAAY;QACzC;QACA,MAAMC,IAAG,GAAIS,GAAG,CAACE,eAAe,CAACJ,KAAK,CAAC,CAAC,CAAC,CAAC;QAC1C,MAAMK,MAAK,GAAI,IAAIC,UAAU,EAAE;QAC/BD,MAAM,CAACE,MAAK,GAAI,MAAM;UAClB,IAAI,CAACf,YAAW,GAAIC,IAAG;UACvB,IAAI,CAACA,IAAG,GAAIA,IAAG;QACnB,CAAC;QACDY,MAAM,CAACG,iBAAiB,CAACR,KAAK,CAAC,CAAC,CAAC,CAAC;MACtC;IACJ,CAAC;IACDS,IAAIA,CAAA,EAAG;MACH,MAAM;QAACf,WAAW;QAAEgB;MAAO,IAAI,IAAI,CAACC,KAAK,CAACC,OAAO,CAACC,SAAS,EAAE;MAC7D,IAAI,CAACnB,WAAU,GAAIA,WAAW;MAC9B,IAAI,CAACF,YAAW,GAAIkB,MAAM,CAACI,SAAS,EAAE;MACtC,IAAI,CAACC,KAAK,CAAC,cAAc,EAAE,IAAI,CAACvB,YAAY,EAAE,IAAI,CAACC,IAAI;IAC3D;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}